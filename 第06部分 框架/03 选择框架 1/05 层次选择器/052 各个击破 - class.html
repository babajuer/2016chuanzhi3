<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
	*{padding: 10px;}
</style>
<body>
<div id="container">
	<h3>h3</h3>
	<div>
		<p class='moshou'>魔兽世界</p>
		<p class="hero">英雄联盟</p>
		<p id="dream">梦幻西游</p>
	</div>
</div>

<script src='itcast.js'></script>
<script type="text/javascript">
	var doms = $cengci('#container div p');
	for(var i = 0, len = doms.length; i < len; i++){
		doms[i].style.border = '1px solid red';
	}


	function $cengci(select){
		//个个击破法则 -- 寻找击破点
		var sel = select.split(' ');
		var context=[];
        var result=[];
		for(var i = 0, len = sel.length; i < len; i++){
			var item = sel[i];
			var first = sel[i].charAt(0)
            var index = item.indexOf(first)
            var name = item.slice(index + 1)
            if(first ==='#'){
				//如果是#，找到该元素，

			}else if(first ==='.'){
				//如果是.
                getElementsByClass(context,name)
                /*当筛选出来以后，这个范围由进一步缩小，
                下一步，我们再从这个缩小的范围中继续获取我们需要的元素*/
				context = result;
			}else{
				//如果是标签
			}
		}
		function getElementsByClass(parents,name){
			/*如果不是以class开头*/
            /*每经过一个管道，这个临时变量的值都会变化，进一步缩小范围*/
           /* 后面的管道根据前面的管道输出的结果进行编程，然后我们继续遍历这个已经缩小的范围，筛选出符合要求的元素*/


            if(parents.length){
                /*这里为什么需要for循环*/
                for(var j = 0, contextLen = parents.length; j < contextLen; j++){
                    pushArray($$.$class(name, context[j]));
                }
            }else{
                /*如果以class开头，这个时候它是管道的开始*/
                pushArray($$.$class(name));
            }
		}
		//封装重复的代码
		function pushArray(doms){
			for(var j= 0, domlen = doms.length; j < domlen; j++){
				result.push(doms[j])
			}
		}
	}

</script>



</body>
</html>

